{% extends 'imageboard/base.html' %}
{% load static %}

{% block page_title %}
    {{ config.SITE_NAME }} :: /{{ board.hid }}/ {{ board.name }}
{% endblock %}

{% block header %}
    {% include 'imageboard/parts/header.html' %}
{% endblock %}

{% block content %}
    {% include 'imageboard/parts/board_header.html' %}

    {% include 'imageboard/parts/rules.html' %}

    {% if board.is_locked %}
        {% include 'imageboard/parts/lockdown.html' with type='board' %}
    {% else %}
        {% include 'imageboard/parts/posting_form.html' with form_type='new_thread' %}
    {% endif %}

    <div class="threads">
        {% for thread in threads %}
            {% include 'imageboard/parts/thread.html' with posts=thread.latest_posts %}

            {% if not forloop.last %}
                <div class="threads__thread-separator"></div>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}

{% block footer %}
    {% include 'imageboard/parts/footer.html' with board_pages=threads %}
{% endblock %}

{% block page_style %}
    <style>{{ board.custom_style }}</style>
{% endblock %}

{% block page_script %}
    <script defer src="{% static "imageboard/hider.js" %}"></script>
{% endblock %}

{% block js_templates %}
    {% include 'imageboard/parts/js_templates.html' %}
{% endblock %}

{% block metadata %}
    {% if cache_data %}
        <div class="cache-data">
            Page generated at {{ cache_data.generated_at|date:config.DATE_TIME_FORMAT }}.
            Board {{ cache_data.board.hid }} updated at {{ cache_data.updated_at|date:config.DATE_TIME_FORMAT }}.
            Page {{ cache_data.page }}.
        </div>
    {% endif %}
{% endblock %}
